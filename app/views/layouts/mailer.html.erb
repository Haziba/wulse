<!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>
  <body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;">
    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" style="background-color: #f5f5f5; padding: 32px 0;">
      <tr>
        <td align="center">
          <table role="presentation" width="600" cellspacing="0" cellpadding="0" style="background-color: #ffffff; max-width: 600px;">
            <!-- Header -->
            <tr>
              <td style="background-color: <%= @institution.branding_colour || '#800020' %>; padding: 24px 32px;">
                <table role="presentation" width="100%" cellspacing="0" cellpadding="0">
                  <tr>
                    <td>
                      <table role="presentation" cellspacing="0" cellpadding="0">
                        <tr>
                          <td style="vertical-align: middle; padding-right: 16px;">
                            <% if @institution.logo.attached? %>
                              <%= image_tag url_for(@institution.logo), alt: @institution.name, style: "width: 56px; height: 56px; border-radius: 8px; object-fit: contain; background-color: rgba(255,255,255,0.2);" %>
                            <% else %>
                              <table role="presentation" cellspacing="0" cellpadding="0" style="width: 56px; height: 56px; background-color: rgba(255,255,255,0.2); border-radius: 8px;">
                                <tr>
                                  <td align="center" valign="middle" style="vertical-align: middle;">
                                    <i class="fas fa-graduation-cap" style="font-size: 24px; color: #ffffff;"></i>
                                  </td>
                                </tr>
                              </table>
                            <% end %>
                          </td>
                          <td style="vertical-align: middle;">
                            <h1 style="margin: 0; font-size: 22px; font-weight: bold; color: #ffffff; font-family: Georgia, 'Times New Roman', serif;"><%= @institution.name %></h1>
                            <p style="margin: 4px 0 0 0; font-size: 14px; color: rgba(255,255,255,0.85);">Digital Library</p>
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>

            <!-- Main Content -->
            <tr>
              <td style="padding: 32px;">
                <%= yield %>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </body>
</html>
