<div class="bg-white rounded-lg border border-gray-200 p-6">
  <h3 class="font-semibold text-gray-900 mb-4">Refine Results</h3>

  <% filters.each do |filter_key, filter_values| %>
    <div id="filter-category-<%= filter_key %>" class="mb-6" data-controller="filter-list">
      <div class="flex items-center justify-between mb-3">
        <h4 class="font-medium text-gray-700"><%= filter_key.to_s.humanize %></h4>
      </div>
      <div class="space-y-2">
        <% filter_values.each do |value, count| %>
          <%
            filter_param_key = filter_key.to_s
            is_checked = params[filter_param_key].nil? || Array(params[filter_param_key]).include?(value)
          %>
          <label class="group flex items-center cursor-pointer hover:text-gray-900" data-filter-list-target="item">
            <%= check_box_tag "#{filter_param_key}[]",
                              value,
                              is_checked,
                              data: { action: "change->debounce-submit#submit" },
                              class: "text-brand-500 rounded border-gray-300 focus:ring-brand-500" %>
            <span class="ml-2 text-sm text-gray-600 flex-1"><%= value.titleize %></span>
            <button type="button"
                    class="text-xs text-brand-500 hover:text-brand-600"
                    data-action="click->filter-list#selectOnly">only</button>
            <span class="text-xs text-gray-500 ml-2"><%= number_with_delimiter(count) %></span>
          </label>
        <% end %>
      </div>
      <button type="button"
              class="mt-2 text-sm text-brand-500 hover:text-brand-600 font-medium hidden"
              data-filter-list-target="toggle"
              data-action="click->filter-list#toggle">
        Show all
      </button>
    </div>
  <% end %>
</div>
