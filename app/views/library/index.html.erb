<!-- Search Header -->
<section class="bg-white border-b border-gray-200 py-6">
  <div class="max-w-7xl mx-auto px-6">
    <div class="max-w-4xl mx-auto" data-controller="library-search" data-library-search-frame-value="library_list">
      <div class="relative">
        <input type="text"
               placeholder="Search documents..."
               value="<%= @query %>"
               class="w-full px-6 py-3 text-lg border-2 border-gray-300 rounded-xl focus:border-brand-500 focus:outline-none pl-14"
               data-library-search-target="input"
               data-action="input->library-search#searchDebounced">
        <i class="fas fa-search absolute left-5 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg"></i>
        <button class="absolute right-3 top-1/2 transform -translate-y-1/2 bg-brand-500 text-white px-6 py-2 rounded-lg hover:bg-brand-600 transition-colors cursor-pointer"
                data-action="click->library-search#search">
          Search
        </button>
      </div>
    </div>
  </div>
</section>

<div class="max-w-7xl mx-auto px-6 py-8" data-controller="sidebar">
  <button class="lg:hidden mb-4 px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 transition-colors flex items-center gap-2"
          data-action="click->sidebar#toggle">
    <i class="fas fa-filter"></i>
    <span>Filters</span>
  </button>

  <div class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden lg:hidden"
       data-sidebar-target="overlay"
       data-action="click->sidebar#close"></div>

  <div class="flex gap-8">
    <!-- Sidebar Filters -->
    <aside class="w-80 flex-shrink-0 fixed lg:static top-0 left-0 h-full lg:h-auto bg-white z-50 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 overflow-y-auto"
           data-sidebar-target="sidebar">
      <%= turbo_frame_tag "filters_list" do %>
        <%= render "filters_list", filters: @filters %>
      <% end %>
    </aside>

    <!-- Results Content -->
    <main class="flex-1">
      <%= turbo_frame_tag "library_list" do %>
        <%= render "library_list", documents: @documents, pagy: @pagy, query: @query, filtered_count: @filtered_count, total_count: @total_count %>
      <% end %>
    </main>
  </div>
</div>
</footer>
