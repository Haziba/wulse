<!-- Results Header -->
<div class="flex items-center justify-between mb-6">
  <div class="flex items-center gap-3">
    <button class="lg:hidden p-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 transition-colors"
            data-action="click->sidebar#toggle">
      <i class="fas fa-filter"></i>
    </button>
    <div>
      <h2 class="text-2xl font-bold text-gray-900">Search Results</h2>
      <p class="text-gray-600"><%= filtered_count %>/<%= total_count %> documents found<%= " for \"#{query}\"" if query.present? %></p>
    </div>
  </div>
</div>

<!-- Search Results List -->
<ul class="space-y-6" role="list">
  <% documents.each do |document| %>
    <%= render "library/document_card", document: document %>
  <% end %>
</ul>

<!-- Pagination -->
<div class="flex flex-col sm:flex-row items-center justify-between gap-4 mt-8 pt-6 border-t border-gray-200">
  <div class="text-sm text-gray-600">
    Showing <%= pagy.from %> to <%= pagy.to %> of <%= pagy.count %> results
  </div>
  <div class="flex items-center space-x-1 sm:space-x-2">
    <% if pagy.prev %>
      <%= link_to library_path(request.params.merge(page: pagy.prev)), class: "px-2 sm:px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100" do %>
        <i class="fas fa-chevron-left"></i>
      <% end %>
    <% else %>
      <span class="px-2 sm:px-3 py-2 border border-gray-300 rounded-lg text-gray-500" aria-disabled="true">
        <i class="fas fa-chevron-left" aria-hidden="true"></i>
        <span class="sr-only">Previous (disabled)</span>
      </span>
    <% end %>

    <% pagy.series.each do |item| %>
      <% if item.is_a?(Integer) %>
        <%= link_to item, library_path(request.params.merge(page: item)), class: "px-2 sm:px-3 py-2 #{item == pagy.page ? 'bg-brand-500 text-white' : 'border border-gray-300 text-gray-700 hover:bg-gray-100'} rounded-lg" %>
      <% elsif item.is_a?(String) %>
        <span class="px-2 sm:px-3 py-2 text-gray-500"><%= item %></span>
      <% elsif item == :gap %>
        <span class="px-1 sm:px-2 text-gray-500">...</span>
      <% end %>
    <% end %>

    <% if pagy.next %>
      <%= link_to library_path(request.params.merge(page: pagy.next)), class: "px-2 sm:px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100" do %>
        <i class="fas fa-chevron-right"></i>
      <% end %>
    <% else %>
      <span class="px-2 sm:px-3 py-2 border border-gray-300 rounded-lg text-gray-500" aria-disabled="true">
        <i class="fas fa-chevron-right" aria-hidden="true"></i>
        <span class="sr-only">Next (disabled)</span>
      </span>
    <% end %>
  </div>
</div>
